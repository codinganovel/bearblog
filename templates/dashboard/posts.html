{% extends 'base.html' %}
{% load custom_tags %}

{% block title %}{% if pages %}Pages{% else %}Posts{% endif %} | Bear Blog{% endblock %}

{% block custom_styles %}
    {% include 'styles/blog/default.css' %}
    {% include 'styles/dashboard.css' %}
    {% include 'snippets/styles.html' with blog=blog %}
{% endblock %}

{% block nav %}{% include '../snippets/dashboard_nav.html' %}{% endblock %}

{% block content %}

<h1>{% if pages %}Pages{% else %}Posts{% endif %}</h1>
{% if pages %}
<a href="{% url 'post_new' %}?is_page=True">
    <button>
    New page
    </button>
</a>
{% else %}
<a href="{% url 'post_new' %}">
    <button>
    New post
    </button>
</a>
<a style="float:right;" href="{% url 'post_template' %}">
    <button>Edit template</button>
</a>
{% endif %}
<ul class="post-list">
    {% for post in posts %}
    <li>
        <span>
            <time datetime="{{ post.published_date|date:'Y-m-d\TH:i\Z' }}">
                {% format_date post.published_date blog.date_format blog.lang tz %}
            </time>
        </span>
        <a href="{% url 'post_edit' uid=post.uid %}">
            {{ post.title }}
        </a>
        {% if not post.publish %}
            <small>(not published)</small>
        {% endif %}
    </li>
    {% empty %}
    <li>
        No posts yet
    </li>
    {% endfor %}
</ul>

{{ blog.footer_directive | safe }}

{% endblock %}
